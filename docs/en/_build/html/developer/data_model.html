
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The Pydap data model &#8212; PyDAP tutorial</title>



  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />


  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'developer/data_model';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Handlers" href="handlers.html" />
    <link rel="prev" title="Handlers" href="../handlers.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>


  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">



  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>

  <div id="pst-scroll-pixel-helper"></div>

  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>


  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>

  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>

  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>


    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">



      <div class="bd-sidebar-primary bd-sidebar">



  <div class="sidebar-header-items sidebar-primary__section">




  </div>

    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">





<a class="navbar-brand logo" href="../intro.html">










    <img src="../_static/PyDAP_logo.png" class="logo__image only-light" alt="PyDAP tutorial - Home"/>
    <script>document.write(`<img src="../_static/PyDAP_logo.png" class="logo__image only-dark" alt="PyDAP tutorial - Home"/>`);</script>


</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Quickstart</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../how_to_install.html">How to install</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../get_started.html">Get Started</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../5_minute_tutorial.html">5 minute tutorial</a></li>

</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../NEWS.html">What’s New</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../notebooks/Authentication.html">Basic Authentication</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../notebooks/netrc.html">Creating a .netrc file</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/ECCO.html">ECCOv4 access via NASA’s EarthData in the Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/PACE.html">PACE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/SWOT.html">SWOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/CMIP6.html">CMIP6</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../PydapAsClient.html">PyDAP as a client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../DAP_Protocol.html">OPeNDAP DAP Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ConstraintExpressions.html">Constraint Expressions: Server-side Subsetting</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../responses.html">Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server.html">Running a server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../handlers.html">Handlers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Guide for Developer</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">The Pydap data model</a></li>
<li class="toctree-l1"><a class="reference internal" href="handlers.html">Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="responses.html">Responses</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../guide_to_developer.html">Guide for new contributors</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/git.html">Guide to version control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/contr_cod.html">Contributing to the code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/contr_issues.html">Report Issues on GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/contr_docs.html">Contributing to the documentation</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>


  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>

  <div id="rtd-footer-container"></div>


      </div>

      <main id="main-content" class="bd-main" role="main">



<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">

              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">

    <div class="header-article-items__start">

        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>

    </div>


    <div class="header-article-items__end">

        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">



      <li><a href="../_sources/developer/data_model.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>




      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>

  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>


<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>

    </div>

</div>
</div>



<div id="jb-print-docs-body" class="onlyprint">
    <h1>The Pydap data model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">

            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata">Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basetype"><code class="docutils literal notranslate"><span class="pre">BaseType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structuretype"><code class="docutils literal notranslate"><span class="pre">StructureType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sequencetype"><code class="docutils literal notranslate"><span class="pre">SequenceType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gridtype"><code class="docutils literal notranslate"><span class="pre">GridType</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>



<div id="searchbox"></div>
                <article class="bd-article">

  <section id="the-pydap-data-model">
<h1>The Pydap data model<a class="headerlink" href="#the-pydap-data-model" title="Link to this heading">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The information regarding this page may be outdated. If you notice the following examples are not running correctly, consider reporting in the Github issue tracker <a class="github reference external" href="https://github.com/pydap/pydap/issues">pydap/pydap#issues</a>.</p>
</div>
<p>The DAP is a protocol designed for the efficient transmission of scientific data over the internet.
In order to transmit data from the server to a client, both must agree on a way to represent data:
<em>is it an array of integers?</em>, <em>a multi-dimensional grid?</em>
In order to do this, the specification defines a <em>data model</em> that, in theory, should be able to represent any existing dataset.</p>
<section id="metadata">
<h2>Metadata<a class="headerlink" href="#metadata" title="Link to this heading">#</a></h2>
<p>pydap has a series of classes in the <code class="docutils literal notranslate"><span class="pre">pydap.model</span></code> module, representing the DAP data model.
The most fundamental data type is called <code class="docutils literal notranslate"><span class="pre">BaseType</span></code>, and it represents a value or an array of values.
Here an example of creating one of these objects:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to pydap 3.2, the name argument was optional for all date types. Since pydap 3.2, it is mandatory.</p>
</div>
<p>All pydap types have five attributes in common. The first one is the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the variable; in this case, our variable is called “a”:</p>
<p>Note that there’s a difference between the variable name (the local name <code class="docutils literal notranslate"><span class="pre">a</span></code>) and its attribute <code class="docutils literal notranslate"><span class="pre">name</span></code>; in this example they are equal, but we could reference our object using any other name:</p>
<p>We can use special characters for the variable names; they will be quoted accordingly:</p>
<p>The second attribute is called <code class="docutils literal notranslate"><span class="pre">id</span></code>. In the examples we’ve seen so far, <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> are equal:</p>
<p>This is because the <code class="docutils literal notranslate"><span class="pre">id</span></code> is used to show the position of the variable in a given dataset, and in these
examples the variables do not belong to any datasets. First let’s store our variables in a container
object called <code class="docutils literal notranslate"><span class="pre">StructureType</span></code>. A <code class="docutils literal notranslate"><span class="pre">StructureType</span></code> is a special type of ordered dictionary that holds other pydap types:</p>
<p>Note that the variable name has to be used as its key on the <code class="docutils literal notranslate"><span class="pre">StructureType</span></code>. This can be easily remedied:</p>
<p>There is a special derivative of the <code class="docutils literal notranslate"><span class="pre">StructureType</span></code> called <code class="docutils literal notranslate"><span class="pre">DatasetType</span></code>, which represent the dataset.
The difference between the two is that there should be only one <code class="docutils literal notranslate"><span class="pre">DatasetType</span></code>, but
it may contain any number of <code class="docutils literal notranslate"><span class="pre">StructureType</span></code> objects, which can be deeply nested. Let’s create our dataset object:</p>
<p>Note that for objects on the first level of the dataset, like <code class="docutils literal notranslate"><span class="pre">s</span></code>, the id is identical to the name.
Deeper objects, like <code class="docutils literal notranslate"><span class="pre">a</span></code> which is stored in <code class="docutils literal notranslate"><span class="pre">s</span></code>, have their id calculated by joining the names of the
variables with a period. One detail is that we can access variables stored in a structure using a “lazy” syntax like this:</p>
<p>The third common attribute that variables share is called <code class="docutils literal notranslate"><span class="pre">attributes</span></code>, which hold most of its metadata.
This attribute is a dictionary of keys and values, and the values themselves can also be dictionaries.
For our variable <code class="docutils literal notranslate"><span class="pre">a</span></code> we have:</p>
<p>These attributes can be accessed lazily directly from the variable:</p>
<p>But if you want to create a new attribute you’ll have to insert it directly into <code class="docutils literal notranslate"><span class="pre">attributes</span></code>:</p>
<p>It’s always better to use the correct syntax instead of the lazy one when writing code.
Use the lazy syntax only when introspecting a dataset on the Python interpreter, to save a few keystrokes.</p>
<p>The fourth attribute is called <code class="docutils literal notranslate"><span class="pre">data</span></code>, and it holds a representation of the actual data.
We’ll take a detailed look of this attribute in the next subsection.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to pydap 3.2, all variables had also an attribute called <code class="docutils literal notranslate"><span class="pre">_nesting_level</span></code>.
This attribute had value 1 if the variable was inside a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> object,
0 if it’s outside, and &gt;1 if it’s inside a nested sequence.
Since pydap 3.2, the <code class="docutils literal notranslate"><span class="pre">_nesting_level</span></code> has been deprecated and there is no
intrinsic way of finding the where in a deep object a variable is located.</p>
</div>
</section>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Link to this heading">#</a></h2>
<p>As we saw on the last subsection, all pydap objects have a <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute that holds a representation of the variable data.
This representation will vary depending on the variable type.</p>
<section id="basetype">
<h3><code class="docutils literal notranslate"><span class="pre">BaseType</span></code><a class="headerlink" href="#basetype" title="Link to this heading">#</a></h3>
<p>For the simple <code class="docutils literal notranslate"><span class="pre">BaseType</span></code> objects the <code class="docutils literal notranslate"><span class="pre">data</span></code> attributes is usually a Numpy array,
though we can also use a Numpy scalar or Python number:</p>
<p>Note that starting from pydap 3.2 the datatype is inferred from the input data:</p>
<p>When you <em>slice</em> a <code class="docutils literal notranslate"><span class="pre">BaseType</span></code> array, the slice is simply passed onto the data attribute. So we may have:</p>
<p>You can think of a <code class="docutils literal notranslate"><span class="pre">BaseType</span></code> object as a thin layer around Numpy arrays,
until you realize that the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute can be <em>any</em> object implementing the array interface!
This is how the DAP client works – instead of assigning an array with data directly to the attribute,
we assign a special object which behaves like an array and acts as a <em>proxy</em> to a remote dataset.</p>
<p>Here’s an example:</p>
<p>In the example above, the data is only downloaded in the last line, when the pseudo array is sliced. The object will construct the appropriate DAP URL, request the data, unpack it and return a Numpy array.</p>
</section>
<section id="structuretype">
<h3><code class="docutils literal notranslate"><span class="pre">StructureType</span></code><a class="headerlink" href="#structuretype" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">StructureType</span></code> holds no data; instead, its <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute is a property that collects data from the children variables:</p>
<p>The opposite is also true; it’s possible to specify the structure data and have it propagated to the children:</p>
<p>The same is true for objects of <code class="docutils literal notranslate"><span class="pre">DatasetType</span></code>, since the dataset is simply the root structure.</p>
</section>
<section id="sequencetype">
<h3><code class="docutils literal notranslate"><span class="pre">SequenceType</span></code><a class="headerlink" href="#sequencetype" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> object is a special kind of <code class="docutils literal notranslate"><span class="pre">StructureType</span></code> holding sequential data.
Here’s an example of a sequence holding the variables <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code> that we created before:</p>
<p>Let’s add some data to our sequence. This can be done by setting a structured numpy array to the data attribute:</p>
<p>Note that the data for the sequence is an aggregation of the children data, similar to Python’s <code class="docutils literal notranslate"><span class="pre">zip()</span></code> builtin.
This will be more complicated when encountering nested sequences, but for flat sequences they behave the same.</p>
<p>We can also iterate over the <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code>. In this case, it will return a series of tuples with the data:</p>
<p>Prior to pydap 3.2.2, this approach was not possible and one had to iterate directly over <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code>:</p>
<p>This approach will be deprecated in pydap 3.4.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> behaves pretty much like <a class="reference external" href="https://numpy.org/doc/stable/user/basics.rec.html">structured arrays</a> from
Numpy, since we can reference them by column (<code class="docutils literal notranslate"><span class="pre">s['a']</span></code>) or by index:</p>
<p>Note that these objects are also <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> themselves. The basic rules when working with sequence data are:</p>
<ol class="arabic simple">
<li><p>When a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> is sliced with a string the corresponding children is returned. For example: <code class="docutils literal notranslate"><span class="pre">s['a']</span></code> will return child <code class="docutils literal notranslate"><span class="pre">a</span></code>;</p></li>
<li><p>When a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> is iterated over (using <code class="docutils literal notranslate"><span class="pre">.iterdata()</span></code> after pydap 3.2.2) it will return a series of tuples, each one containing the data for a record;</p></li>
<li><p>When a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> is sliced with an integer, a comparison or a <code class="docutils literal notranslate"><span class="pre">slice()</span></code> a new <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> will be returned;</p></li>
<li><p>When a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> is sliced with a tuple of strings a new <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> will be returned, containing only the children defined in the tuple in the new order.
For example, <code class="docutils literal notranslate"><span class="pre">s[('c',</span> <span class="pre">'a')]</span></code> will return a sequence <code class="docutils literal notranslate"><span class="pre">s</span></code> with the children <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span></code>, in that order.</p></li>
</ol>
<p>Note that except for rule 4 <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> mimics the behavior of Numpy structure arrays.</p>
<p>Now imagine that we want to add to a <code class="docutils literal notranslate"><span class="pre">SequenceType</span></code> data pulled from a relational database.
The easy way would be to fetch the data in the correct column order, and insert it into the sequence.
But what if we don’t want to store the data in memory, and instead we would like to stream it directly from the database?
In this case we can create an object that behaves like a structure array, similar to the proxy object that implements the array interface.
pydap defines a “protocol” called <code class="docutils literal notranslate"><span class="pre">IterData</span></code>, which is simply any object that:</p>
<ol class="arabic simple">
<li><p>Returns data when iterated over.</p></li>
<li><p>Returns a new <code class="docutils literal notranslate"><span class="pre">IterData</span></code> when sliced such that:</p>
<ol class="loweralpha simple">
<li><p>if the slice is a string the new <code class="docutils literal notranslate"><span class="pre">IterData</span></code> contains data only for that children;</p></li>
<li><p>if the slice is a tuple of strings the object contains only those children, in that order;</p></li>
<li><p>if the slice is an integer, a <code class="docutils literal notranslate"><span class="pre">slice()</span></code> or a comparison, the data is filter accordingly.</p></li>
</ol>
</li>
</ol>
<p>The base implementation works by wrapping data from a basic Numpy array.
And here is an example of how we would use it:</p>
<p>One can also iterate directly over the <code class="docutils literal notranslate"><span class="pre">IterData</span></code> object to obtain the data:</p>
<p>This approach will not be deprecated in pydap 3.4. NOTE: For numpy &gt; 2.0, iterating over the
<code class="docutils literal notranslate"><span class="pre">IterData</span></code> object returns a record specifying the individual types of the elements of the
sequence</p>
<p>There are many implementations of classes derived from <code class="docutils literal notranslate"><span class="pre">IterData</span></code>: <code class="docutils literal notranslate"><span class="pre">pydap.handlers.dap.SequenceProxy</span></code> is a proxy to
sequential data on Opendap servers, <code class="docutils literal notranslate"><span class="pre">pydap.handlers.csv.CSVProxy</span></code> wraps a CSV file,
and <code class="docutils literal notranslate"><span class="pre">pydap.handlers.sql.SQLProxy</span></code> works as a stream to a relational database.</p>
</section>
<section id="gridtype">
<h3><code class="docutils literal notranslate"><span class="pre">GridType</span></code><a class="headerlink" href="#gridtype" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">GridType</span></code> is a special kind of object that behaves like an array and a <code class="docutils literal notranslate"><span class="pre">StructureType</span></code>.
The class is derived from <code class="docutils literal notranslate"><span class="pre">StructureType</span></code>; the major difference is that the first defined variable is a multidimensional array,
while subsequent children are vector maps that define the axes of the array. This way, the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute on a <code class="docutils literal notranslate"><span class="pre">GridType</span></code>
returns the data of all its children: the n-dimensional array followed by <em>n</em> maps.</p>
<p>Here is a simple example:</p>
<p>Grid behave like arrays in that they can be sliced. When this happens, a new <code class="docutils literal notranslate"><span class="pre">GridType</span></code> is returned with the proper data and axes:</p>
<p>It is possible to disable this feature (some older servers might not handle it nicely):</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./developer"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>






                <footer class="prev-next-footer d-print-none">

<div class="prev-next-area">
    <a class="left-prev"
       href="../handlers.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Handlers</p>
      </div>
    </a>
    <a class="right-next"
       href="handlers.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Handlers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>

            </div>



                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata">Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#basetype"><code class="docutils literal notranslate"><span class="pre">BaseType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#structuretype"><code class="docutils literal notranslate"><span class="pre">StructureType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sequencetype"><code class="docutils literal notranslate"><span class="pre">SequenceType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gridtype"><code class="docutils literal notranslate"><span class="pre">GridType</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>


          </div>
          <footer class="bd-footer-content">

<div class="bd-footer-content__inner container">

  <div class="footer-item">

<p class="component-author">
By OPeNDAP Community
</p>

  </div>

  <div class="footer-item">


  <p class="copyright">

      © Copyright 2023.
      <br/>

  </p>

  </div>

  <div class="footer-item">

  </div>

  <div class="footer-item">

  </div>

</div>
          </footer>


      </main>
    </div>
  </div>

  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
